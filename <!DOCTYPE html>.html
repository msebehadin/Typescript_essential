<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Three.js B&W Portrait</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script type="module">
        import * as THREE from 'https://unpkg.com/three@0.160.0/build/three.module.js';

        const scene = new THREE.Scene();
        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const loader = new THREE.TextureLoader();
        
        // LOAD YOUR IMAGE HERE
        loader.load('image_1f763f.png', (texture) => {
            
            // Aspect Ratio Logic
            const imageAspect = texture.image.width / texture.image.height;
            const screenAspect = window.innerWidth / window.innerHeight;
            let scaleX = 1, scaleY = 1;
            if (screenAspect > imageAspect) {
                scaleX = screenAspect / imageAspect;
            } else {
                scaleY = imageAspect / screenAspect;
            }

            const material = new THREE.ShaderMaterial({
                uniforms: {
                    tDiffuse: { value: texture },
                    uContrast: { value: 1.3 },    // High contrast for drama
                    uBrightness: { value: 0.05 }, // Slight lift to shadows
                    uVignette: { value: 0.55 }    // Stronger vignette for focus
                },
                vertexShader: `
                    varying vec2 vUv;
                    void main() {
                        vUv = uv;
                        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                    }
                `,
                fragmentShader: `
                    uniform sampler2D tDiffuse;
                    uniform float uContrast;
                    uniform float uBrightness;
                    uniform float uVignette;
                    varying vec2 vUv;

                    void main() {
                        vec4 color = texture2D(tDiffuse, vUv);

                        // 1. Convert to Grayscale (Luminance method)
                        // These numbers match human eye sensitivity to colors
                        float gray = dot(color.rgb, vec3(0.299, 0.587, 0.114));

                        // 2. Apply Contrast
                        gray = (gray - 0.5) * uContrast + 0.5;
                        
                        // 3. Apply Brightness
                        gray += uBrightness;

                        // 4. Apply Vignette
                        vec2 uv = (vUv - 0.5) * vec2(1.0);
                        float dist = length(uv);
                        float vignette = smoothstep(0.9, 0.25, dist * (1.0 + uVignette));
                        
                        // Combine
                        vec3 finalColor = vec3(gray) * vignette;

                        gl_FragColor = vec4(finalColor, 1.0);
                    }
                `
            });

            const geometry = new THREE.PlaneGeometry(2 * scaleX, 2 * scaleY);
            const mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);

            renderer.render(scene, camera);
        });

        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>